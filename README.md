# Проектная работа "Веб-ларек"  

### Архитектура проекта  

Архитектура проекта построена на принципах изолированности, единственной ответственности и масштабируемости. В основе лежит паттерн MVP (Model-View-Presenter) для обеспечения модульности и удобства.  

## Основные части архитектуры:
### Данные (Model):
Описывают бизнес-логику и хранят информацию о товарах, корзине и заказах.
Включают трансформацию данных, получаемых от API, в удобный для представления формат.
### Представление (View):
Отвечают за отображение данных пользователю.
Реализуют модальные окна, страницы и компоненты интерфейса, такие как каталог, корзина, форма оформления заказа.
### Презентер (Presenter):
Контролируют взаимодействие между данными и представлениями.
Реализуют обработку событий и управление состоянием приложения через EventEmitter.  

## Компоненты приложения  
  1. Карточка товара (содержит данные названия товара, описания, цены, категории, изображения).
  2. Форма для заказа (содержит данные способа оплаты, адреса доставки, почты, телефона).
  3. Каталог товаров (отображает каталог).
  4. Корзина с товарами (отображает список выбранных товаров с возможностью редактирования: удаление/добавление в корзину, очищение корзины)
## Данные в приложении  
  - Название товара
  - Описание товара
  - Цена товара
  - Категория товара
  - Изображение товара
  - Способ оплаты
  - Адрес доставки
  - Почта
  - Телефон
## Действия в приложении 
  - Выбор способа оплаты и адреса
  - Указание почты и телефона
  - Очистка данных

  - Добаление в корзину
  - Удаление из корзины
  - Очищение корзины
  - Получение списка товаров в корзине
    
### Стек: HTML, SCSS, TS, Webpack

### Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

### Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
## Типы данных 
### IProduct
Содержит данные карточек товара.  

Поля:  
  ```name: string``` // Название товара  
  ```id: string;``` // Айди товара  
  ```description: string``` // Описание товара  
  ```price: number``` // Цена товара  
  ```category: string``` // Категория товара  
  ```image: string``` // Ссылка на изображение товара  
  
### IOrder
Содержит данные для заказа.  

Поля:  
  ```deliveryAddress: string``` // Адрес доставки  
  ```paymentMethod: string``` // Способ оплаты  
   ```email: string``` // Почта покупателя  
  ```phone: string``` // Телефон покупателя  
### ICartItem
Содержит данные элемента корзины.  

Поля:  
  ```products: string[];```  
  ```quantity: number``` // Кол-во товаров
## Общие классы
### Component<T>  
Назначение: Базовый класс для всех компонентов интерфейса. Обеспечивает общие методы для управления DOM-элементами.  
Конструктор:  
```container: HTMLElement``` // Корневой DOM-элемент компонента.
Методы:  
```setText``` // Устанавливает текстовое содержимое для дочернего элемента.  
```toggleClass``` // Добавляет или удаляет CSS-класс у дочернего элемента.  
```setImage``` // Устанавливает изображение и альтернативный текст.  
```setDisabled``` // Изменяет статус блокировки для дочернего элемента.   
``` setHidden```, ```setVisible ```// Скрывает или отображает дочерний элемент.   
``` render ```// Рендерит элемент, используя данные.  

## Model
### AppData  
Назначение: Управляет хранением данных.    
Свойства: ```items: IProduct[];```// Массив товаров.   
    ```preview: IProduct | null;```// Открытый товар  
    ```cart: ICartItem;```// Данные корзины  
    ```order: IOrder;```// Данные заказа  
    ```formErrors: FormErrors;```// Валидация формы    
Конструктор:   ```events: IEvents```
Методы:  
``` setItems ```// Меняет массив товаров на переданный.  
``` setPreview ```// Меняет превью на переданный товар.  
``` isInCart ```// Проверяет наличие переданного товара в корзине.  
``` addToCart ```// Добавляет переданный товар в корзину в корзину.  
``` removeFromCart ```// Убирает переданный товар из корзины.  
``` clearCart ```// Очищает корзину.  
``` setPaymentMethod ```// Изменяет способ оплаты.  
``` setOrderField ```// Изменяет содержимое переданного поля на полученное значение.  
``` validateOrder ```// Проверяет валидацию.  
``` clearOrder ```// Очищает объект заказа  
### ClientAPI  
Назначение: Отвечает за трансформацию данных, получаемых от API.   
Свойства: ```cdn```// url сервера с контентом. 
Конструктор: ```cdn: string, baseUrl: string, options?: RequestInit```  
Методы:  
```getProductList``` // Возвращает массив продуктов с сервера.  
```getProduct``` // Возвращает продукт с сервера по переданному .  
```createOrder``` // Отправляет переданный заказ на сервер и возвращает результат.  
## View  
### View<T>  
Базовый класс, расширяющий класс Component, добавляя в него поле events, в которое записывается брокер событий, чтобы была возможность их генерации.

constructor(container: HTMLElement, protected readonly events: IEvents)
 - принимает элемент контейнера, в который будет помещен компонент и брокер событий

### Modal  
Назначение: Отвечает за все модальные окна.   
Свойства: ```_closeButton```// Элемент кнопки закрытия модального окна.  
```_content```// Элемент с содержимым модального окна.  
Конструктор: ```container: HTMLElement, protected events: IEvents```  
Методы:  
```content``` // Меняет содержимое модального окна.  
```openModal``` // Открывает модальное окно.  
```closeModal``` // Закрывает модальное окно.  
```render(data: IModalDate): HTMLElement``` // Рендерит модальное окно и открывает его.  
### Cart  
Назначение: Отвечает за отображение корзины. Унаследован от Component.   
Конструктор: ```protected events: IEvents```  
Методы:  
```toggleButton``` // Меняет состояние активности кнопки на переданное.  
```items``` // Меняет содержимое в корзине в зависимости от переданных товаров.  
```price``` // Меняет итоговую сумму на переданное значение.  
### Card
Назначение: Отвечает за отображение карточки товара. Унаследован от Component.   
Конструктор: ```container: HTMLElement, actions?: ICardActions```  
Методы:  
``` id ``` // Принимает и задает id карточки.  
``` title ``` // Принимает и задает содержимое заголовка на полученное.  
``` price ``` // Принимает и задает содержимое контейнера с ценой на полученное.  
``` category ``` // Меняет содержимое контейнера с категорией на полученное.   
``` image ``` // Меняет изображение или альтернативный текст в карточке.  
``` description ``` // Меняет содержимое контейнера с описанием на полученное.  
``` button ``` // Устанавливает текст на кнопке.  

### Form<T> 
Назначение: Реализует общий класс Формы.   
Свойства: ```_submit```// Элемент кнопки для сабмита формы.  
```_errors```// Контейнер с сообщениями об ошибках.  
Конструктор: ```protected container: HTMLFormElement, protected events: IEvents```  
Методы:  
```valid``` // Меняет disable для кнопки сабмита.  
```errors``` // Меняет содержимое контейнера _errors на переданное.  
```onInputChange``` // Выполняет emit события с переданными параметрами.  
```render``` // Рендерит компоненты формы, используя переданное состояние. 
### OrderForm  
Назначение: Отвечает за отображение компонентов оформления заказа  
Конструктор: ```container: HTMLFormElement, events: IEvents```  
Методы:  
```paymentMethod``` // Меняет классы кнопок метода оплаты.  
```deliveryAddress``` // Меняет содержимое поля addredd в форме.  
### ContactsForm
Назначение: Отвечает за отображение компонентов формы контактов.   
Конструктор: ```container: HTMLFormElement, events: IEvents```  
Методы:  
``` email ``` // Меняет содержимое поля email в форме.  
``` phone ``` // Меняет содержимое поля phone в форме.  
### ProductView
Назначение: Отвечает за отображение компонентов главной страницы с продуктами.   
Конструктор: ```container: HTMLElement, events: IEvents```  
Методы:  
``` counter ``` // Меняет содержимое счетчика.  
``` gallery ``` // Меняет содержимое галереи.  
``` locked ``` // Меняет класс обертки на переданное знаечние.  
### Success 
Назначение: Отвечает за отображение окна с успешным заказом.   
Конструктор: ```container: HTMLElement, events: IEvents, actions: ISuccessActions```  
Методы:  
``` total ``` // Меняет содержимое элемента с суммой заказа.  
## Presenter 
Отвечает за взаимодействие компонентов. Взаимодействие происходит за счет брокера событий, который их остлеживает.
### EventEmitter<T>
Назначение: Управляет событиями в приложении, позволяет подписываться на события и вызывать их.
